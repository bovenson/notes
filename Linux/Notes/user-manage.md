# 用户管理

## 添加用户

`useradd [-u UID] [-g 初始用户组] [-mM] [-c 说明栏] [-d 主文件夹绝对路径] [-s shell] 用户账户名`

### 参数

| 参数   | 说明                                       |
| ---- | ---------------------------------------- |
| `-u` | UID, 一组数字. 为账户指定特定的UID                   |
| `-g` | 为用户指定用户组名, 该用户组的GID会被放置到`/etc/passwd`的第四个字段内 |
| `-G` | 为用户指定还可以加入的用户组名, 这个参数会修改`/etc/group`内的相关数据 |
| `-M` | 强制不创建用户主文件夹(系统账号默认值)                     |
| `-m` | 强制创建用户主文件夹(普通账号默认值)                      |
| `-c` | `/etc/passwd`第五列的说明内容, 可随意设置             |
| `-d` | 指定某个目录为该用户主文件夹, 而不是使用默认值.                |
| `-r` | 创建一个系统账号, 账号的UID会有限制                     |
| `-s` | 后面接一个shell, 若没有指定则默认是`/bin/bash`         |
| `-e` | 后面接一个日期, 格式为`YYYY-MM-DD`, 此选项可写入shadow第八个字段, 即账号失效日的设置选项 |
| `-f` | 后面shadow的第七个字段选项, 指定密码是否会失效. 0为立刻失效 , -1为永远不失效. |

### 示例

#### 创建sudo用户

```shell
# 示例一
# -G:sudo group / -s:指定shell / -m:创建主目录 / 用户名
sudo useradd -G sudo -s /bin/bash -m bovenson
```

## 为已有用户添加sudo权限

```shell
# 示例一
sudo vim /etc/sudoers
# 添加
yourusername    ALL=(ALL:ALL) ALL

# 示例二
sudo adduser yourusername sudo

# 示例三
sudo usermod -a -G sudo yourusername
```

## 修改用户账号

- usermod可用来修改用户帐号的各项设定

- ```shell
  usermod [-LU][-c <备注>][-d <登入目录>][-e <有效期限>][-f <缓冲天数>][-g <群组>][-G <群组>][-l <帐号名称>][-s <shell>][-u <uid>][用户帐号]
  ```

- | 参数           | 说明                | 示例   |
  | ------------ | ----------------- | ---- |
  | -c <备注>      | 修改用户帐号的备注文字       |      |
  | -d <登入目录>    | 修改用户登入时的目录        |      |
  | -e <有效期限>    | 修改帐号的有效期限         |      |
  | -f <缓冲天数>    | 修改在密码过期后多少天即关闭该帐号 |      |
  | -g <群组>      | 修改用户所属的群组         |      |
  | -G <群组>      | 修改用户所属的附加群组       |      |
  | -l <帐号名称>    | 修改用户帐号名称          |      |
  | -L           | 锁定用户密码，使密码无效      |      |
  | `-s <shell>` | 修改用户登入后所使用的shell  |      |
  | `-u <uid>`   | 修改用户ID            |      |
  | -U           | 解除密码锁定            |      |


