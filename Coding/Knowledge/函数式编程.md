---
title: 函数式编程
tags:
	- 函数式编程
categories:
	- Coding
---

# 简介

函数式编程是种**编程方式**，它将电脑运算视为函数的计算。属于**结构化编程**的一种，**主要思想**是把运算过程尽量写成一些列嵌套的函数调用。

**对比**

和指令编程相比，函数式编程强调函数的计算比指令的执行重要。

和过程化编程相比，函数式编程里函数的计算可随时调用。

# 特性

**闭包和高阶函数**

函数编程支持函数作为第一类对象，有时称为闭包或者[仿函数](https://baike.baidu.com/item/%E4%BB%BF%E5%87%BD%E6%95%B0)（functor）对象。实质上，**闭包是起函数的作用并可以像对象一样操作的对象**。与此类似，函数式编程语言支持高阶函数。高阶函数可以用另一个函数（间接地，用一个表达式）作为其输入参数，在某些情况下，它甚至返回一个函数作为其输出参数。这两种结构结合在一起使得可以用优雅的方式进行模块化编程，这是使用 函数式编程 的最大**好处**。

**惰性计算**

除了高阶函数和[仿函数](https://baike.baidu.com/item/%E4%BB%BF%E5%87%BD%E6%95%B0)（或闭包）的概念，函数式编程 还引入了[惰性计算](https://baike.baidu.com/item/%E6%83%B0%E6%80%A7%E8%AE%A1%E7%AE%97)的概念。在惰性计算中，[表达式](https://baike.baidu.com/item/%E8%A1%A8%E8%BE%BE%E5%BC%8F)不是在绑定到变量时立即计算，而是在求值程序需要产生表达式的值时进行计算。延迟的计算使您可以编写可能潜在地生成无穷输出的函数。因为不会计算多于程序的其余部分所需要的值，所以不需要担心由无穷计算所导致的 out-of-memory 错误。一个惰性计算的例子是生成无穷 Fibonacci 列表的函数，但是对第n个Fibonacci 数的计算相当于只是从可能的无穷列表中提取一项。

**递归**

函数式编程还有一个特点是用[递归](https://baike.baidu.com/item/%E9%80%92%E5%BD%92)做为控制流程的机制。

# 特点

**函数是第一公民**

所谓第一等公民，指的是函数与其他数据类型一样，处于平等地位，可以赋值给其他变量，也可以作为参数，传入另一个函数，或者作为别的函数的返回值。

举例：

```
var print = function (i) {console.log(i)}
[1, 2, 3].forEach(print)
```

**只用表达式 不用语句**

**表达式**是一个单纯的运算过程，总是有返回值；**语句**是执行某种操作，没有返回值。函数式编程要求，只使用表达式，不使用语句。也就是说，每一步都是单纯的计算，而且都有返回值。

函数式编程的开发**动机**，一开始就是为了处理运算（computation），不考虑系统的读写（I/O）。**语句**属于对系统的读写操作，所以就被排斥在外。编程过程中，函数式编程只要求把I/O限制到最小，不要有不必要的读写行为，保持计算过程的单纯性。

**没有副作用**

所谓副作用，指的是函数内部与外部互动（比如，修改全局变量的值），产生运算以外的其他结果。

函数式编程强调没有副作用，意味着函数要保持**独立**，所有功能就是返回一个新的值，没有其他行为，尤其是不得修改外部变量的值。

副作用是修改系统状态的语言结构。因为函数式编程语言不包含任何[赋值语句](https://baike.baidu.com/item/%E8%B5%8B%E5%80%BC%E8%AF%AD%E5%8F%A5)，变量值一旦被指派就永远不会改变。而且，调用函数只会计算出结果，不会出现其他效果。因此，函数式编程 语言没有副作用。

**不修改状态**

函数式编程只是返回新的值，不修改系统变量。因此，不修改变量，也是它的一个重要特点。

在其他类型的语言中，变量往往用来保存"状态"（state）。不修改变量，意味着状态不能保存在变量中。**函数式编程使用参数保存状态**，最好的例子就是递归。

**引用透明性**

函数程序通常还加强引用透明性，即如果提供同样的输入，那么函数总是返回同样的结果。就是说，表达式的值不依赖于可以改变值的全局状态。这使您可以从形式上推断程序行为，因为表达式的意义只取决于其子表达式而不是计算顺序或者其他表达式的副作用。这有助于验证正确性、简化算法，甚至有助于找出优化它的方法。

# 优点

**代码简洁 开发迅速**

函数式编程大量使用函数，减少了代码的重复，因此程序比较短，开发速度较快。

**接近自然语言 易于理解**

函数式编程的自由度很高，可以写出很接近自然语言的代码。

**更方便的代码管理**

函数式编程不依赖、也不会改变外界的状态，只要给定输入参数，返回的结果必定相同。因此，每一个函数都可以被看做独立单元，很有利于进行单元测试（unit testing）和除错（debugging），以及模块化组合。

**易于并发编程**

函数式编程不需要考虑"死锁"（deadlock），因为它不修改变量，所以根本不存在"锁"线程的问题。不必担心一个线程的数据，被另一个线程修改，所以可以很放心地把工作分摊到多个线程，部署"并发编程"（concurrency）。

**代码的热升级**

函数式编程没有副作用，只要保证接口不变，内部实现是外部无关的。所以，可以在运行状态下直接升级代码，不需要重启，也不需要停机。

# 参考

- [百度百科](https://baike.baidu.com/item/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/4035031?fr=aladdin)

