---
title: 分享
date: 2018-8-14
---

# 业务场景

- 浏览器
- 想看

# 数据流

- 用户
- recommend-api
  - 满足各种推荐业务
  - 曝光历史
  - 卡片（请求，news、video、CMS等）组装
  - 过程
    - top-queue
    - recent click query
    - ...
- 推荐引擎
  - news-service
  - video-service
  - CMS
    - 精品库
- 内容池

线下

- 数据
  - o2o log
  - session log

- kafka、spark streaming
- 用户画像
- 模型

信息流

- 图文
- 图集
- 视频
- 广告

# 服务部署

- RPC
  - thrift
- 应用服务器
  - resign
- web框架
  - paoding-rose

**xbox**

- job
  - 仓库
  - 代码
  - 部署脚本
  - 部署

# 实验平台

- AB实验：基本原理是控制变量法
- AA试验（空转实验）：为了测试埋点、分流、试验统计的正确性，增加AB实验的试验结论的可信度
- 分层试验
  - 每个独立实验为一层，层与层之间流量是正交的一份流量穿越每层试验时，都会再次随机打散，且随机效果离散
  - 减弱流量对某个试验的影响

# 召回和打分

- 获取用户画像
- attention
- candidate
  - 不获取数据，只是构造数据获取范围
  - top-queue
    - children
      - query
        - children
          - index
      - query
      - ...
- recall
  - filter
    - 色情度
    - 历史
  - 取数据
    - redis
    - 缓存
- score
- merge
  - 根据cadidate
- 实时落特征

