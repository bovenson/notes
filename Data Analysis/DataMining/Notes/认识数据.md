---
title: 认识数据
tags: 数据挖掘, 认识数据
---

[TOC]

# 1 数据对象与属性类型

## 1. 1数据对象与属性类型

### 1.1.1 什么是属性

**属性** 是一个数据字段，表示数据对象的一个特征。

属性可以是：

- 标称的
- 二元的
- 序数的
- 数值的

### 1.1.2 标称属性

**标称属性**的值是一些符号或事物的_名称_。

### 1.1.3 二元属性

**二元属性** 是一种标称属性，只有两个类别或状态：0或1。

如果两种状态对应 true 和 false 的话，二元属性又称为**布尔属性**。

### 1.1.4 序数属性

**序数属性** 是一种属性，其可能的值之间具有有意义的序或秩评定，但是相继值之间的查是未知的。如：大、中、小。

序数属性的中心趋势，可以用它的众数和中位数表示。但不能定义均值。

### 1.1.5 数值属性

**数值属性** 是定量的，即它是可度量的量，用整数或实数值表示。

分为：

- 区间标度属性
- 比率标度属性

可以计算它们的均值、中位数、众数以及值之间的差。

### 1.1.6 离散属性与连续属性

**离散属性** 具有有限或无限可数个数。如果数据不是离散的，则它是**连续的**。

## 1.2 数据的基本统计描述

对于成功的数据预处理而言，把握数据的全貌是至关重要的。基本统计描述可以用来识别数据的性质，凸显哪些数据值应该视为噪声或离群点。

三类基本统计描述：

- 中心趋势：它度量数据分布的中部或中心。直观地说，给定一个属性，它的值大部分落在何处？

  - 均值
  - 中位数
  - 众数
  - 中列数

- 数据的散布：即数据如何分散？数据散布的最常见度量是数据的：

  - 极差
  - 四分位数
  - 四分位数极差
  - 五数概括
  - 盒图
  - 方差
  - 标准差

  对于识别离群点，这些度量是有用的

- 可视化审视数据

  - 条图
  - 饼图
  - 线图
  - 分位数图
  - 分位数-分位数图
  - 直方图
  - 散点图

### 1.2.1 中心趋势：均值、中位数、众数

#### 均值（mean）

$\bar{x} = \frac{\sum \limits _{i=1} \limits ^{N} x_i}{N} = \frac{x_1 + x_2 + … + x_N}{N}$

均值对极端值很敏感。可以使用截尾均值（丢弃高低极端值后的均值）。

##### 程序实现

```python
import pandas as pd

# 加载数据
train_df = pd.read_csv('./data/train.csv')

# 计算所有数值均值
train_df.mean()

# 计算某一列均值
train_df['Age'].mean()
```

[查看详细输出](../Jupyter/mean.ipynb)

**加权算术平均值** 或 **加权平均**

$\bar{x} = \frac{\sum \limits_{i=1} \limits^{N} w_i x_i}{\sum \limits_{i=1} \limits^{N}w_i} = \frac{w_1x_1+w_2x_2 + … + w_Nx_N}{w_1+w_2+…+w_N}$

#### 中位数（median）

对于倾斜（非对称）数据，数据中心的更好度量是 **中位数**。中位数是有序数据值的中间值。它是把较高的一半和较低的一半分开。

当观测数据很大时，中位数的计算开销很大。我们可以很容易地计算中位数近似值，令包含中位数频率的区间为中位数区间，用插值计算这个数据集的中位数的近似值：

$median = L_1 + (\frac{N/2 - (\sum freq)_l}{freq_{median}})width$

$L_1$ 是中位数区间的下界， $N$ 是整个数据集中值得个数， $(\sum freq)_l$ 是低于中位数区间的所有区间的频率和，$freq_{median}$ 是中位数区间的频率，$width$ 是中位数区间的宽度。

##### 程序实现

```python
import pandas as pd
import numpy as np
# 读取数据
train = pd.read_csv('./data/train.csv')

# 所有数值属性的中位数
train.median()

# Age 属性的中位数
train['Age'].median()
```

[查看详细输出](../Jupyter/show/median.ipynb)

#### 众数（mode）

众数是一种数据中心趋势度量。数据集的**众数（mode）**是集合中出现最频繁的值。

数据集可以使：

- 单峰的
- 多峰的（双峰、三峰...）
- 没有众数的

##### 程序实现

```python
import pandas as pd
import numpy as np
# 读取数据
train = pd.read_csv('./data/train.csv')

# Age 属性的众数
train['Age'].mode()

# 对非数值属性计算众数
train['Sex'].mode()
```

[查看详细输出](../Jupyter/mode.ipynb)

对于适度倾斜（非对称）的单峰数值数据，我们有下面的经验关系：

$mean - mode \approx 3 * (mean - median)$ 

这意味着，如果均值和中位数已知，则适度倾斜的单峰频率曲线的众数容易近似计算。

#### 中列数（midrange）

中列数是数据集的最大和最小值得平均值。

##### 程序实现

```python
import pandas as pd
import numpy as np
# 读取数据
train = pd.read_csv('./data/train.csv')

# 计算中列数
(train['Age'].max() + train['Age'].min()) / 2
```

### 2.2.2 度量数据散布：极差、四分位数、方差、标准差和四分位极差

#### 极差（range）

最大值与最小值之差

#### 分位数（quantile）

是取自数据分布的每隔一段时间上的点，把数据划分成基本上大小相等的连贯集合。

#### 四分位数（quartile）

把数据分布划分成4个相等的部分，使得每部分表示数据分布的四分之一，通常称它们为四分位数。

#### 四分位数极差（IQR）

$IQR = Q_3 - Q_1$

$Q_i$ : 第 $i$ 个四分位数。

#### 五数概括（five-number summary）

分布的五数概括由中位数($Q_2$)、四分位数 $Q_1$ 和 $Q_3$ 、最小和最大观测值组成，按次序 $Minimum$、$Q_1$、$Median$ 、$Q_3$ 、 $Maximum$ 写出。

#### 盒图（boxplot）

盒图是一种流行的分布的直观表示。盒图体现了五数概括：

- 盒的端点一般在四分位数上，使得盒的长度是四分位数极差 $IQR$
- 中位数用盒内的线标记
- 盒外的两条线（称作胡须）延伸到最小和最大观测值

盒图可以用来比较若干个可比较的数据集。

#### 方差（variance）和标准差（standard deviation）

方差和标准差都是数据散布的度量，它们指出数据分布的散布程度。

低标准差意味着数据观测趋向于非常靠近均值，而高标准差表示数据散布在一个大的值域中。

数据属性 X 的 N 个观测值 $x_1, x_2, …, x_N$ 的方差是：

$\sigma ^2 = \frac{1}{N} \sum \limits_{i=1} \limits^{N} (x_i - \bar{x}) ^2 = (\frac{1}{N} \sum \limits_{i=1} \limits^{N} x_i^2)^2 - \bar{x}^2$

标准差 $\sigma $ 是方差 $\sigma^2$ 的平方根。

作为发散性的度量，标准差 $\sigma$ 的性质是：

- $\sigma$ 度量关于均值的发散，仅当选择均值作为中心度量时使用
- 仅当不存在发散时，即当所有的观测值都具有相同值时，$\sigma = 0$ ；否则，$\sigma > 0$

#### 程序实现

```python
# coding: utf-8
# In[1]:
import pandas as pd
import matplotlib.pyplot as plt 
get_ipython().run_line_magic('matplotlib', 'inline')


# In[2]:
# 加载数据集
train = pd.read_csv('./data/train.csv')


# In[3]:
train.head(5)


# In[4]:
age = train['Age']


# In[5]:
# 极差
d_range = age.max() - age.min()
print(d_range)


# In[6]:
# 四分位数
quartile = age.quantile([.25, .5, .75])
print(quartile)


# In[7]:
# 四分位数极差
quartile = quartile.values
IQR = quartile[2] - quartile[0]
print(IQR)


# In[9]:
# 五数概括
q1 = quartile[0]
q3 = quartile[2]
minimum = age.min()
maxinum = age.max()
median = quartile[1]
print(minimum, q1, median, q3, maxinum)

# In[10]:
# 绘制盒图
# 年龄数据切分
ages = [age.values[i*200: (i+1)*200] for i in range(4)]

# 绘制盒图
age_df = pd.DataFrame({
    'part 1': ages[0],
    'part 2': ages[1],
    'part 3': ages[2],
    'part 4': ages[3],
})

age_df.boxplot()
plt.show()

# In[11]:
# 计算方差
age.var()

# In[12]:
# 计算标准差
age.std()
```

[查看详细输出](../Jupyter/数据散布.ipynb)

